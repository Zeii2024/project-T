{"version":3,"sources":["webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?03fe","webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?f928","webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?673d","webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?3733","uni-app:///pages/admin-stages/edit.vue","webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?397c","webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?3b46","uni-app:///main.js","webpack:///F:/Work/UniApp/project-T/pages/system/project/list.vue?c9d2","webpack:///F:/Work/UniApp/project-T/pages/system/project/list.vue?6330","webpack:///F:/Work/UniApp/project-T/pages/system/project/list.vue?7f5b","webpack:///F:/Work/UniApp/project-T/pages/system/project/list.vue?f02b","uni-app:///pages/system/project/list.vue","webpack:///F:/Work/UniApp/project-T/pages/system/project/list.vue?9e81","webpack:///F:/Work/UniApp/project-T/pages/system/project/list.vue?2382"],"names":["result","name","props","dialogTitle","type","default","itemInfo","data","console","showDialog","formData","formOptions","rules","getValidator","onReady","methods","initFormData","i","submit","uni","mask","submitForm","icon","title","setTimeout","that","content","showCancel","closeDialog","getDetail","db","get","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","DialogComponent","collectionList","getTemp","query","where","orderby","orderByFieldName","selectedIndexs","options","pageSize","pageCurrent","filterData","enumConverter","imageStyles","width","height","exportExcel","project","owner","members","state","stages","cost","total_cost","stageItem","_id","stage_id","project_id","start_time","end_time","sort","creat_time","exportExcelData","addAppidLoading","descriptionThWidth","buttonThWidth","onLoad","computed","editRow","pageSizeChange","selectProject","item","onqueryload","appid","description","changeSize","addCurrentAppid","getWhere","search","loadData","clear","onPageChanged","current","navigateTo","url","events","refreshData","selectedItems","delTable","success","selectionChange","confirmDelete","confirmContent","sortChange","filterChange","value","publish"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AAC0K;AAC1K,gBAAgB,mLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,aAAa,8RAEN;AACP,KAAK;AACL;AACA,aAAa,oSAEN;AACP,KAAK;AACL;AACA,aAAa,wUAEN;AACP,KAAK;AACL;AACA,aAAa,iZAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAAunB,CAAgB,4oBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC0P3oB;AAEA;AAAA;AAEA;AACA;AAEA;EACA;EACA;IACA;MACAA;IACA;EACA;EACA;AACA;AAAA,gBAEA;EACAC;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;QACA;MACA;IACA;EACA;EACAE;IACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;IACA;MACAC;MACAC;MACAC;MACAC,yBACAC;IAEA;EACA;EAEAC;IACA;IACA;EACA;EAEAC;IACAC;MACA;MACAC;MACA;IACA;IACA;IACAC;MAAA;MACAC;QACAC;MACA;MACAZ;MACA;MACA;MACA;QACA;MACA;QACAW;QACA;MACA;IAEA;IACA;IACAE;MAAA;MACA;MACAb;MACAA;MACA;QACAW;UACAG;UACAC;QACA;QACA;QACAC;UAAA;QAAA;QACAC;MACA;QACAN;UACAO;UACAC;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IAEA;AACA;AACA;AACA;IACAC;MAAA;MACAV;QACAC;MACA;MACAU,8CACA,+FACAC;QACA;QACA;UACA;QAEA;MACA;QACAZ;UACAO;UACAC;QACA;MACA;QACAR;MACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;ACpYA;AAAA;AAAA;AAAA;AAAm5B,CAAgB,64BAAG,EAAC,C;;;;;;;;;;;ACAv6B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAE2D;AAC3D;AACA;AAHA;AACAa,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AAC0K;AAC1K,gBAAgB,mLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gTAEN;AACP,KAAK;AACL;AACA,aAAa,+TAEN;AACP,KAAK;AACL;AACA,aAAa,wPAEN;AACP,KAAK;AACL;AACA,aAAa,sRAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,mWAEN;AACP,KAAK;AACL;AACA,aAAa,oMAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtIA;AAAA;AAAA;AAAA;AAAunB,CAAgB,4oBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACyL3oB;AACA;AAIA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACA;EACA;AACA;AAAA,eAEA;EACAnC;EACAoC;IACAC;EACA;EACA/B;IACA;MACAgC,uDACA,8FACAC,4EACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MAAA,GACAC,6BACA;MACAC;QACAC;QACAC;MACA;MACAC;QACA;QACA;QACA;UACA;UACA;UACA;UACA;QACA;MACA;MACAC;QACAtD;QACAuD;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAF;MAEAG;QACAC;QACAC;QACAC;QACAhE;QACAyD;QACAF;QACAC;QACAS;QACAC;QACAC;QACAC;MACA;MACAlE;MACAM;MAEA6D;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACA5D;IACA;EACA;EACA6D,4BACA,iDACA;EACA5D;IACA;IACAa;MACA;QACA;QACA;QACA;QACAH;QACAD;UACAC;QACA;MACA;MACA;IACA;IACAmD;MAAA;MACApE;MAEA;MACAA;MACA;MACA;MACA;QACA;MACA;IACA;IACAqE;MAAA;MACA;MACA;MACA;QACA;MACA;IACA;IACA,iBACAC;MACA;MACA;MAAA,2CAEAC;QAAA;MAAA;QAAA;UAAA;QAGA,EAFA;QACA;MACA;QAAA;MAAA;QAAA;MAAA;MACAvE;MACAA;MACAA;MACA;QACAP;QACAuD;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;MACA;MACA;IACA;IACAmB;MAAA;MACA;QAAA;MAAA;QACA;UACAC;UACAhF;UACAiF;QACA;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACAtD;QACA;QACAN;UACAL;YACAO;YACAC;UACA;QACA;MACA,yBAEA;QACA;MACA;IACA;IACA0D;MACA;MACA;QACA;MACA;MACA;MACA;QAAA;MAAA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACAC;MACA;IACA;IACAC;MACA;MACA;MACA;QACAC;MACA;IACA;IACAC;MAAA;MACA;MACAxE;QACAyE;QACAC;UACAC;YACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MACAxF,aACA,sGACA;MACA;QACAyF;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA3F,aACA,sGACA;MACA;QACA4F;QACAH;UACA;QACA;MACA;IACA;IACAI;MAAA;MACA;MACA;QACA;MACA;QACA;MACA;MACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACAlG;QACAmG;MACA;MACA;MACA;QACA;MACA;QACA;MACA;MACA;QACA;MACA;IACA;IACAC;MACArF;QACAyE;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzdA;AAAA;AAAA;AAAA;AAAm5B,CAAgB,64BAAG,EAAC,C;;;;;;;;;;;ACAv6B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/system/project/list.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./edit.vue?vue&type=template&id=fc875a06&\"\nvar renderjs\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./edit.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/admin-stages/edit.vue\"\nexport default component.exports","export * from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./edit.vue?vue&type=template&id=fc875a06&\"","var components\ntry {\n  components = {\n    uniForms: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms/uni-forms\" */ \"@/uni_modules/uni-forms/components/uni-forms/uni-forms.vue\"\n      )\n    },\n    uniFormsItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms-item/uni-forms-item\" */ \"@/uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.vue\"\n      )\n    },\n    uniEasyinput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput\" */ \"@/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n    uniDataCheckbox: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox\" */ \"@/uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox.vue\"\n      )\n    },\n    uniDatetimePicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker\" */ \"@/uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./edit.vue?vue&type=script&lang=js&\"","<!-- <template>\r\n  <view class=\"uni-container\">\r\n    <uni-forms ref=\"form\" :model=\"formData\" validate-trigger=\"submit\" err-show-type=\"toast\">\r\n      <uni-forms-item name=\"stage_id\" label=\"StageId\">\r\n        <uni-easyinput :disabled=\"true\" placeholder=\"阶段id\" v-model=\"formData.stage_id\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"project_id\" label=\"ProjectId\" required>\r\n        <uni-easyinput :disabled=\"true\" placeholder=\"对应的项目id\" v-model=\"formData.project_id\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"name\" label=\"\" required>\r\n        <uni-easyinput placeholder=\"阶段名称\" v-model=\"formData.name\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"state\" label=\"\">\r\n        <uni-easyinput placeholder=\"阶段状态, 1:未开始,2:进行中,3:已完成,4:延期中,5:已中止\" type=\"number\" v-model=\"formData.state\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"owner\" label=\"\">\r\n        <uni-easyinput placeholder=\"负责人\" v-model=\"formData.owner\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"members\" label=\"\">\r\n        <uni-easyinput placeholder=\"阶段成员\" v-model=\"formData.members\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"sort\" label=\"\">\r\n        <uni-easyinput placeholder=\"阶段排序\" type=\"number\" v-model=\"formData.sort\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"permision\" label=\"\">\r\n        <uni-data-checkbox :multiple=\"true\" v-model=\"formData.permision\"></uni-data-checkbox>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"start_time\" label=\"\">\r\n        <uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.start_time\"></uni-datetime-picker>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"end_time\" label=\"\">\r\n        <uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.end_time\"></uni-datetime-picker>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"create_time\" label=\"\">\r\n        <uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.create_time\"></uni-datetime-picker>\r\n      </uni-forms-item>\r\n      <view class=\"uni-button-group\">\r\n        <button type=\"primary\" class=\"uni-button\" @click=\"submit\">提交</button>\r\n      </view>\r\n    </uni-forms>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import { validator } from '../../js_sdk/validator/admin-stages.js';\r\n\r\n  const db = uniCloud.database();\r\n  const dbCollectionName = 'admin-stages';\r\n\r\n  function getValidator(fields) {\r\n    let result = {}\r\n    for (let key in validator) {\r\n      if (fields.indexOf(key) > -1) {\r\n        result[key] = validator[key]\r\n      }\r\n    }\r\n    return result\r\n  }\r\n\r\n  \r\n\r\n  export default {\r\n    data() {\r\n      let formData = {\r\n        \"stage_id\": \"\",\r\n        \"project_id\": \"\",\r\n        \"name\": \"\",\r\n        \"state\": null,\r\n        \"owner\": \"\",\r\n        \"members\": \"\",\r\n        \"sort\": null,\r\n        \"permision\": [],\r\n        \"start_time\": null,\r\n        \"end_time\": null,\r\n        \"create_time\": null\r\n      }\r\n      return {\r\n        formData,\r\n        formOptions: {},\r\n        rules: {\r\n          ...getValidator(Object.keys(formData))\r\n        }\r\n      }\r\n    },\r\n    onLoad(e) {\r\n      if (e.id) {\r\n        const id = e.id\r\n        this.formDataId = id\r\n        this.getDetail(id)\r\n      }\r\n    },\r\n    onReady() {\r\n      this.$refs.form.setRules(this.rules)\r\n    },\r\n    methods: {\r\n      \r\n      /**\r\n       * 验证表单并提交\r\n       */\r\n      submit() {\r\n        uni.showLoading({\r\n          mask: true\r\n        })\r\n        this.$refs.form.validate().then((res) => {\r\n          return this.submitForm(res)\r\n        }).catch(() => {\r\n        }).finally(() => {\r\n          uni.hideLoading()\r\n        })\r\n      },\r\n\r\n      /**\r\n       * 提交表单\r\n       */\r\n      submitForm(value) {\r\n        // 使用 clientDB 提交数据\r\n        return db.collection(dbCollectionName).doc(this.formDataId).update(value).then((res) => {\r\n          uni.showToast({\r\n            icon: 'none',\r\n            title: '修改成功'\r\n          })\r\n          this.getOpenerEventChannel().emit('refreshData')\r\n          setTimeout(() => uni.navigateBack(), 500)\r\n        }).catch((err) => {\r\n          uni.showModal({\r\n            content: err.message || '请求服务失败',\r\n            showCancel: false\r\n          })\r\n        })\r\n      },\r\n\r\n      /**\r\n       * 获取表单数据\r\n       * @param {Object} id\r\n       */\r\n      getDetail(id) {\r\n        uni.showLoading({\r\n          mask: true\r\n        })\r\n        db.collection(dbCollectionName).doc(id).field(\"stage_id,project_id,name,state,owner,members,sort,permision,start_time,end_time,create_time\").get().then((res) => {\r\n          const data = res.result.data[0]\r\n          if (data) {\r\n            this.formData = data\r\n            \r\n          }\r\n        }).catch((err) => {\r\n          uni.showModal({\r\n            content: err.message || '请求服务失败',\r\n            showCancel: false\r\n          })\r\n        }).finally(() => {\r\n          uni.hideLoading()\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .uni-container {\r\n    padding: 15px;\r\n  }\r\n\r\n  .uni-input-border,\r\n  .uni-textarea-border {\r\n    width: 100%;\r\n    font-size: 14px;\r\n    color: #666;\r\n    border: 1px #e5e5e5 solid;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .uni-input-border {\r\n    padding: 0 10px;\r\n    height: 35px;\r\n\r\n  }\r\n\r\n  .uni-textarea-border {\r\n    padding: 10px;\r\n    height: 80px;\r\n  }\r\n\r\n  .uni-button-group {\r\n    margin-top: 50px;\r\n    /* #ifndef APP-NVUE */\r\n    display: flex;\r\n    /* #endif */\r\n    justify-content: center;\r\n  }\r\n\r\n  .uni-button {\r\n    width: 184px;\r\n  }\r\n</style -->>\r\n\r\n\r\n\r\n<template>\r\n\t<transition name=\"dialog-fade\">\r\n\t\t<el-dialog v-if=\"showDialog\" :title=\"dialogTitle\" class=\"dialog-component\" :visible.sync=\"showDialog\"\r\n\t\t\twidth=\"500px\" @close=\"closeDialog(0)\">\r\n\r\n\t\t\t<uni-forms ref=\"form\" :model=\"formData\" validate-trigger=\"submit\" err-show-type=\"toast\">\r\n\t\t\t\t<uni-forms-item name=\"stage_id\" label=\"阶段id\">\r\n\t\t\t\t\t<uni-easyinput :disabled=\"false\" placeholder=\"阶段id\" v-model=\"formData.stage_id\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"project_id\" label=\"对应的项目id\" required>\r\n\t\t\t\t\t<uni-easyinput :disabled=\"false\" placeholder=\"对应的项目id\"\r\n\t\t\t\t\t\tv-model=\"formData.project_id\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"阶段名称\" label=\"阶段名称\" required>\r\n\t\t\t\t\t<uni-easyinput placeholder=\"阶段名称\" v-model=\"formData.name\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"state\" label=\"阶段状态\">\r\n\t\t\t\t\t<uni-easyinput placeholder=\"阶段状态, 1:未开始,2:进行中,3:已完成,4:延期中,5:已中止\" type=\"number\"\r\n\t\t\t\t\t\tv-model=\"formData.state\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"owner\" label=\"负责人\">\r\n\t\t\t\t\t<uni-easyinput placeholder=\"负责人\" v-model=\"formData.owner\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"members\" label=\"阶段成员\">\r\n\t\t\t\t\t<uni-easyinput placeholder=\"阶段成员\" v-model=\"formData.members\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"sort\" label=\"阶段排序\">\r\n\t\t\t\t\t<uni-easyinput placeholder=\"阶段排序\" type=\"number\" v-model=\"formData.sort\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"permision\" label=\"权限\">\r\n\t\t\t\t\t<uni-data-checkbox :multiple=\"true\" v-model=\"formData.permision\"></uni-data-checkbox>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"start_time\" label=\"开始时间\">\r\n\t\t\t\t\t<uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.start_time\"></uni-datetime-picker>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"end_time\" label=\"结束时间\">\r\n\t\t\t\t\t<uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.end_time\"></uni-datetime-picker>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"create_time\" label=\"创建时间\">\r\n\t\t\t\t\t<uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.create_time\"></uni-datetime-picker>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<view class=\"uni-button-group\">\r\n\t\t\t\t\t<button class=\"uni-button\" type=\"primary\" size=\"mini\" @click=\"submit\">确定</button>\r\n\t\t\t\t\t<button class=\"uni-button\" type=\"warn\" size=\"mini\" @click=\"closeDialog(0)\">取消</button>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms>\r\n\t\t</el-dialog>\r\n\t</transition>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tvalidator\r\n\t} from '../../js_sdk/validator/admin-stages.js';\r\n\r\n\tconst db = uniCloud.database();\r\n\tconst dbCollectionName = 'admin-stages';\r\n\r\n\tfunction getValidator(fields) {\r\n\t\tlet result = {}\r\n\t\tfor (let key in validator) {\r\n\t\t\tif (fields.indexOf(key) > -1) {\r\n\t\t\t\tresult[key] = validator[key]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n\r\n\texport default {\r\n\t\tname: \"DialogComponent\",\r\n\t\tprops: {\r\n\t\t\tdialogTitle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: \"添加人员\",\r\n\t\t\t},\r\n\t\t\titemInfo: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: function() {\r\n\t\t\t\t\treturn {};\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\tlet formData = {\r\n\t\t\t\t\"_id\": \"\",\r\n\t\t\t\t\"stage_id\": \"\",\r\n\t\t\t\t\"project_id\": \"\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"state\": null,\r\n\t\t\t\t\"owner\": \"\",\r\n\t\t\t\t\"members\": \"\",\r\n\t\t\t\t\"sort\": null,\r\n\t\t\t\t\"permision\": [],\r\n\t\t\t\t\"start_time\": null,\r\n\t\t\t\t\"end_time\": null,\r\n\t\t\t\t\"create_time\": null\r\n\t\t\t}\r\n\t\t\tconsole.log(\"edit form************\")\r\n\t\t\treturn {\r\n\t\t\t\tshowDialog: false,\r\n\t\t\t\tformData: JSON.parse(JSON.stringify(this.itemInfo)),\r\n\t\t\t\tformOptions: {},\r\n\t\t\t\trules: {\r\n\t\t\t\t\t...getValidator(Object.keys(formData))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonReady() {\r\n\t\t\t/* ToDo 表单验证 */\r\n\t\t\tthis.$refs.form.setRules(this.rules)\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tinitFormData(item) {\r\n\t\t\t\tlet i = item\r\n\t\t\t\ti.members = JSON.stringify(i.members)\r\n\t\t\t\treturn i\r\n\t\t\t},\r\n\t\t\t//验证表单并提交\t\t\t \r\n\t\t\tsubmit() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(\"dialogCompent--res:\")\r\n\t\t\t\t// console.log(JSON.stringify(res))\r\n\t\t\t\t/* 出错，验证通过不了 ToDo */\r\n\t\t\t\tthis.$refs.form.validate().then((res) => {\r\n\t\t\t\t\treturn this.submitForm(res)\r\n\t\t\t\t}).catch(() => {}).finally(() => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tlet formData = {}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t//提交表单\r\n\t\t\tsubmitForm(value) {\r\n\t\t\t\t// 使用 clientDB 提交数据\r\n\t\t\t\tconsole.log(\"提交表单submitForm...........................\")\r\n\t\t\t\tconsole.log(this.formDataId)\r\n\t\t\t\treturn db.collection(dbCollectionName).doc(this.formDataId).update(value).then((res) => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '修改成功'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.getOpenerEventChannel().emit('refreshData')\r\n\t\t\t\t\tsetTimeout(() => uni.navigateBack(), 500)\r\n\t\t\t\t\tthat.closeDialog(1);\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: err.message || '请求服务失败',\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 关闭弹框\r\n\t\t\tcloseDialog(flag) {\r\n\t\t\t\t// this.$refs[\"formInfo\"].resetFields();\r\n\t\t\t\tthis.showDialog = false;\r\n\t\t\t\tthis.$emit(\"closeDialog\", flag);\r\n\t\t\t\tthis.formData = {}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 获取表单数据\r\n\t\t\t * @param {Object} id\r\n\t\t\t */\r\n\t\t\tgetDetail(id) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tdb.collection(dbCollectionName).doc(id).field(\r\n\t\t\t\t\t\t\"stage_id,project_id,name,state,owner,members,sort,permision,start_time,end_time,create_time\")\r\n\t\t\t\t\t.get().then((res) => {\r\n\t\t\t\t\t\tconst data = res.result.data[0]\r\n\t\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\t\tthis.formData = data\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: err.message || '请求服务失败',\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).finally(() => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.uni-container {\r\n\t\tpadding: 15px;\r\n\t}\r\n\r\n\t.uni-input-border,\r\n\t.uni-textarea-border {\r\n\t\twidth: 100%;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #666;\r\n\t\tborder: 1px #e5e5e5 solid;\r\n\t\tborder-radius: 5px;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.uni-input-border {\r\n\t\tpadding: 0 10px;\r\n\t\theight: 35px;\r\n\r\n\t}\r\n\r\n\t.uni-textarea-border {\r\n\t\tpadding: 10px;\r\n\t\theight: 80px;\r\n\t}\r\n\r\n\t.uni-button-group {\r\n\t\tmargin-top: 50px;\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\t/* #endif */\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.uni-button {\r\n\t\twidth: 184px;\r\n\t}\r\n</style>","import mod from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./edit.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./edit.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1720781127879\n      var cssReload = require(\"D:/App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/system/project/list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./list.vue?vue&type=template&id=0137d8cb&\"\nvar renderjs\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/system/project/list.vue\"\nexport default component.exports","export * from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=template&id=0137d8cb&\"","var components\ntry {\n  components = {\n    uniStatBreadcrumb: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-stat-breadcrumb/uni-stat-breadcrumb\" */ \"@/components/uni-stat-breadcrumb/uni-stat-breadcrumb.vue\"\n      )\n    },\n    unicloudDb: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/@dcloudio/uni-cli-shared/components/unicloud-db\" */ \"@dcloudio/uni-cli-shared/components/unicloud-db.vue\"\n      )\n    },\n    uniList: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list/uni-list\" */ \"@/uni_modules/uni-list/components/uni-list/uni-list.vue\"\n      )\n    },\n    uniListItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list-item/uni-list-item\" */ \"@/uni_modules/uni-list/components/uni-list-item/uni-list-item.vue\"\n      )\n    },\n    uniTable: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-table/uni-table\" */ \"@/uni_modules/uni-table/components/uni-table/uni-table.vue\"\n      )\n    },\n    uniTr: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-tr/uni-tr\" */ \"@/uni_modules/uni-table/components/uni-tr/uni-tr.vue\"\n      )\n    },\n    uniTh: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-th/uni-th\" */ \"@/uni_modules/uni-table/components/uni-th/uni-th.vue\"\n      )\n    },\n    uniTd: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-td/uni-td\" */ \"@/uni_modules/uni-table/components/uni-td/uni-td.vue\"\n      )\n    },\n    uniPagination: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-pagination/components/uni-pagination/uni-pagination\" */ \"@/uni_modules/uni-pagination/components/uni-pagination/uni-pagination.vue\"\n      )\n    },\n    fixWindow: function () {\n      return import(\n        /* webpackChunkName: \"components/fix-window/fix-window\" */ \"@/components/fix-window/fix-window.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.$t(\"common.placeholder.query\")\n  var m1 = _vm.$t(\"common.button.search\")\n  var m2 = _vm.$t(\"common.button.add\")\n  var g0 = _vm.selectedIndexs.length\n  var m3 = _vm.$t(\"common.button.batchDelete\")\n  var m4 = _vm.$hasSSP(\"25c3c19b-2\")\n  var m5 = m4 ? _vm.$getSSP(\"25c3c19b-2\", \"default\") : null\n  var m6 = m4 ? _vm.$getSSP(\"25c3c19b-2\", \"default\") : null\n  var m7 = m4\n    ? _vm.$getSSP(\"25c3c19b-2\", \"default\")[\"error\"].message ||\n      _vm.$t(\"common.empty\")\n    : null\n  var l0 = m4\n    ? _vm.__map(_vm.stages, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var m8 = _vm.$t(\"common.button.edit\")\n        var m9 = _vm.$t(\"common.button.delete\")\n        return {\n          $orig: $orig,\n          m8: m8,\n          m9: m9,\n        }\n      })\n    : null\n  var m10 = m4 ? _vm.$getSSP(\"25c3c19b-2\", \"default\") : null\n  var m11 = m4 ? _vm.$getSSP(\"25c3c19b-2\", \"default\") : null\n  var m12 = m4 ? _vm.$getSSP(\"25c3c19b-2\", \"default\") : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n      var _temp, _temp2\n      return _vm.selectProject(item)\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2,\n        g0: g0,\n        m3: m3,\n        m4: m4,\n        m5: m5,\n        m6: m6,\n        m7: m7,\n        l0: l0,\n        m10: m10,\n        m11: m11,\n        m12: m12,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=script&lang=js&\"","<template>\r\n\r\n\t<view class=\"fix-top-window\">\r\n\t\t<view class=\"uni-header\">\r\n\t\t\t<uni-stat-breadcrumb class=\"uni-stat-breadcrumb-on-phone\" />\r\n\t\t\t<view class=\"uni-group\">\r\n\t\t\t\t<!-- 搜索框 -->\r\n\t\t\t\t<!-- 页面模板中使用 $t() 获取，并传递国际化json文件中定义的key，js中使用 this.$t('') -->\r\n\t\t\t\t<input class=\"uni-search\" type=\"text\" v-model=\"query\" @confirm=\"search\"\r\n\t\t\t\t\t:placeholder=\"$t('common.placeholder.query')\" />\r\n\t\t\t\t<button class=\"uni-button hide-on-phone\" type=\"default\" size=\"mini\"\r\n\t\t\t\t\t@click=\"search\">{{$t('common.button.search')}}</button>\r\n\r\n\t\t\t\t<!-- 新增 ./add 当前目录的add文件  ../表示上一层目录  ../../表示上上层目录-->\r\n\t\t\t\t<button class=\"uni-button\" type=\"primary\" size=\"mini\"\r\n\t\t\t\t\t@click=\"navigateTo('../../admin-projects/add')\">{{$t('common.button.add')}}</button>\r\n\t\t\t\t<!-- 批量删除 -->\r\n\t\t\t\t<button class=\"uni-button\" type=\"warn\" size=\"mini\" :disabled=\"!selectedIndexs.length\"\r\n\t\t\t\t\t@click=\"delTable\">{{$t('common.button.batchDelete')}}</button>\r\n\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t<!-- #ifndef VUE3 -->\r\n\t\t\t\t<download-excel class=\"hide-on-phone\" :fields=\"exportExcel.fields\" :data=\"exportExcelData\"\r\n\t\t\t\t\t:type=\"exportExcel.type\" :name=\"exportExcel.filename\">\r\n\t\t\t\t\t<button class=\"uni-button\" type=\"primary\" size=\"mini\">{{$t('common.button.exportExcel')}}</button>\r\n\t\t\t\t</download-excel>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"uni-container\">\r\n\t\t\t<unicloud-db ref=\"udb\" collection=\"admin-projects,admin-stages\" :where=\"where\" page-data=\"replace\"\r\n\t\t\t\t:orderby=\"orderby\" :getcount=\"true\" :page-size=\"options.pageSize\" :page-current=\"options.pageCurrent\"\r\n\t\t\t\tv-slot:default=\"{data,pagination,loading,error,options}\">\r\n\r\n\t\t\t\t<view class=\"uni-side-screen\" style=\"display: flex; width: 100%;height: 100%;\">\r\n\t\t\t\t\t<!-- 项目左侧导航栏 -->\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tstyle=\"align-self: flex-start; min-width: 15%; height: 100%; text-align: left; border: 2px;border-color: antiquewhite;\">\r\n\t\t\t\t\t\t<uni-list height=\"auto\">\r\n\t\t\t\t\t\t\t<uni-list-item v-for=\"item in data\" :key=\"item.id\" :title=\"item.name\"\r\n\t\t\t\t\t\t\t\t@click=\"selectProject(item)\" link>\r\n\t\t\t\t\t\t\t</uni-list-item>\r\n\t\t\t\t\t\t</uni-list>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 项目右侧内容区 -->\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tstyle=\"align-self: flex-end; min-width: 15%; height: 100%; text-align: left; border: 2px;border-color: antiquewhite;\">\r\n\t\t\t\t\t\t<!-- 项目基础信息 上部-->\r\n\t\t\t\t\t\t<view class=\"project_base\"\r\n\t\t\t\t\t\t\tstyle=\"display:inline-block; width: 100%; min-height: 100px; padding-bottom: 30px;\">\r\n\t\t\t\t\t\t\t<!-- 一行基础信息 -->\r\n\t\t\t\t\t\t\t<view calss=\"base_info_line\" style=\"display: flex; flex-wrap: wrap; margin: 20px 0 0 20px;\">\r\n\t\t\t\t\t\t\t\t<!-- 一项 -->\r\n\t\t\t\t\t\t\t\t<view class=\"base_info_item\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"flex-wrap: wrap; align-self: flex-start; width: 50%;display: flex;\">\r\n\t\t\t\t\t\t\t\t\t<!-- Key -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_key\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>项目名:</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<!-- Value -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_value\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{project.name}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 第二项 -->\r\n\t\t\t\t\t\t\t\t<view class=\"base_info_item\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"flex-wrap: wrap; align-self: flex-end; width: 50%; display: flex;\">\r\n\t\t\t\t\t\t\t\t\t<!-- Key -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_key\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>负责人:</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<!-- Value -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_value\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{project.owner}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 一行基础信息 -->\r\n\t\t\t\t\t\t\t<view calss=\"base_info_line\" style=\"display: flex; flex-wrap: wrap; margin: 20px 0 0 20px;\">\r\n\t\t\t\t\t\t\t\t<view class=\"base_info_item\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"flex-wrap: wrap; align-self: flex-start; width: 50%;display: flex;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_key\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>项目成员:</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_value\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{project.members}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 第二项 -->\r\n\t\t\t\t\t\t\t\t<view class=\"base_info_item\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"flex-wrap: wrap; align-self: flex-end; width: 50%; display: flex;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_key\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>项目状态:</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_value\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{project.state}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 一行基础信息 -->\r\n\t\t\t\t\t\t\t<view calss=\"base_info_line\" style=\"display: flex; flex-wrap: wrap; margin: 20px 0 0 20px;\">\r\n\t\t\t\t\t\t\t\t<view class=\"base_info_item\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"flex-wrap: wrap; align-self: flex-start; width: 50%;display: flex;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_key\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>项目进度:</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_value\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{project.stages}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 第二项 -->\r\n\t\t\t\t\t\t\t\t<view class=\"base_info_item\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"flex-wrap: wrap; align-self: flex-end; width: 50%; display: flex;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_key\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>项目成本:</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"base_info_value\" style=\"margin-left:20px;\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{project.cost}}/{{project.total_cost}}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 项目基础信息（表格） 下部 -->\r\n\t\t\t\t\t\t<!-- table 和  uni-pagination必须是同级，否则页面中的表和页脚分离-->\r\n\t\t\t\t\t\t<uni-table ref=\"table\" :loading=\"loading\" :emptyText=\"error.message || $t('common.empty')\"\r\n\t\t\t\t\t\t\tborder stripe type=\"selection\" @selection-change=\"selectionChange\">\r\n\t\t\t\t\t\t\t<uni-tr>\r\n\t\t\t\t\t\t\t\t<uni-th align=\"center\" filter-type=\"search\">StageId</uni-th>\r\n\t\t\t\t\t\t\t\t<uni-th align=\"center\" filter-type=\"search\">阶段名称</uni-th>\r\n\t\t\t\t\t\t\t\t<uni-th align=\"center\" filter-type=\"search\">阶段状态</uni-th>\r\n\t\t\t\t\t\t\t\t<uni-th align=\"center\" filter-type=\"search\">负责人</uni-th>\r\n\t\t\t\t\t\t\t\t<uni-th align=\"center\" filter-type=\"search\">阶段成员</uni-th>\r\n\t\t\t\t\t\t\t\t<uni-th align=\"center\" filter-type=\"timestamp\">创建时间</uni-th>\r\n\t\t\t\t\t\t\t\t<uni-th align=\"center\" :width=\"buttonThWidth\">操作</uni-th>\r\n\t\t\t\t\t\t\t</uni-tr>\r\n\t\t\t\t\t\t\t<uni-tr v-for=\"(item,index) in stages\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<uni-td align=\"center\">{{item.stage_id}}</uni-td>\r\n\t\t\t\t\t\t\t\t<uni-td align=\"center\">{{item.name}}</uni-td>\r\n\t\t\t\t\t\t\t\t<uni-td align=\"left\">{{item.state}}</uni-td>\r\n\t\t\t\t\t\t\t\t<uni-td align=\"center\">{{item.owner}}</uni-td>\r\n\t\t\t\t\t\t\t\t<uni-td align=\"center\">{{item.members}}</uni-td>\r\n\t\t\t\t\t\t\t\t<uni-td align=\"center\">{{item.creat_time}}</uni-td>\r\n\t\t\t\t\t\t\t\t<uni-td align=\"center\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"uni-group\">\r\n\t\t\t\t\t\t\t\t\t\t<!-- 阶段的修改和删除 弹窗表单形式 -->\r\n\t\t\t\t\t\t\t\t\t\t<button @click=\"editRow(item)\" class=\"uni-button\" size=\"mini\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"primary\">{{$t('common.button.edit')}}</button>\r\n\t\t\t\t\t\t\t\t\t\t<button @click=\"confirmDelete(item._id)\" class=\"uni-button\" size=\"mini\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"warn\">{{$t('common.button.delete')}}</button>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</uni-td>\r\n\t\t\t\t\t\t\t</uni-tr>\r\n\r\n\t\t\t\t\t\t\t<uni-tr>\r\n\t\t\t\t\t\t\t\t<button class=\"uni-button\" @click=\"navigateTo('../../admin-stages/add')\">新增阶段</button>\r\n\t\t\t\t\t\t\t</uni-tr>\r\n\r\n\t\t\t\t\t\t</uni-table>\r\n\r\n\t\t\t\t\t\t<!--弹框组件开始-----------------------start-->\r\n\t\t\t\t\t\t<dialog-component v-if=\"showDialog\" ref=\"dialogComponent\" :dialog-title=\"dialogTitle\"\r\n\t\t\t\t\t\t\t:item-info=\"stageItem\" @closeDialog=\"closeDialog()\"></dialog-component>\r\n\t\t\t\t\t\t<!--弹框组件开始-----------------------end-->\r\n\r\n\t\t\t\t\t\t<!-- 底部 -->\r\n\t\t\t\t\t\t<view class=\"uni-pagination-box\">\r\n\t\t\t\t\t\t\t<uni-pagination show-icon show-page-size :page-size=\"pagination.size\"\r\n\t\t\t\t\t\t\t\tv-model=\"pagination.current\" :total=\"pagination.count\" @change=\"onPageChanged\"\r\n\t\t\t\t\t\t\t\t@pageSizeChange=\"pageSizeChange\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</unicloud-db>\r\n\t\t</view>\r\n\r\n\t\t<!-- #ifndef H5 -->\r\n\t\t<fix-window />\r\n\t\t<!-- #endif -->\r\n\t</view>\r\n</template>\r\n\r\n\r\n<script>\r\n\t// import DialogComponent from \"../dialogComponent\";\r\n\timport DialogComponent from \"../../admin-stages/edit.vue\";\r\n\timport {\r\n\t\tenumConverter,\r\n\t\tfilterToWhere\r\n\t} from '../../../js_sdk/validator/admin-projects.js';\r\n\timport {\r\n\t\tmapState\r\n\t} from 'vuex'\r\n\r\n\tconst db = uniCloud.database()\r\n\t// 表查询配置\r\n\tconst dbOrderBy = 'create_date' // 排序字段\r\n\tconst dbSearchFields = [] // 模糊搜索字段，支持模糊搜索的字段列表\r\n\t// 分页配置\r\n\tconst pageSize = 20\r\n\tconst pageCurrent = 1\r\n\r\n\tconst orderByMapping = {\r\n\t\t\"ascending\": \"asc\",\r\n\t\t\"descending\": \"desc\"\r\n\t}\r\n\r\n\texport default {\r\n\t\tname: \"DialogDemo\",\r\n\t\tcomponents: {\r\n\t\t\tDialogComponent\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcollectionList: [db.collection('admin-projects').field(\r\n\t\t\t\t\t\t'project_id,name,description,create_date,cost, state, stages, total_cost, owner_id, members')\r\n\t\t\t\t\t.getTemp(), db.collection('admin-stages').field('_id, name,owner').getTemp()\r\n\t\t\t\t],\r\n\t\t\t\tquery: '',\r\n\t\t\t\twhere: '',\r\n\t\t\t\torderby: dbOrderBy,\r\n\t\t\t\torderByFieldName: \"\",\r\n\t\t\t\tselectedIndexs: [],\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tpageSize,\r\n\t\t\t\t\tpageCurrent,\r\n\t\t\t\t\tfilterData: {},\r\n\t\t\t\t\t...enumConverter\r\n\t\t\t\t},\r\n\t\t\t\timageStyles: {\r\n\t\t\t\t\twidth: 64,\r\n\t\t\t\t\theight: 64\r\n\t\t\t\t},\r\n\t\t\t\texportExcel: {\r\n\t\t\t\t\t\"filename\": \"opendb-app-list.xls\",\r\n\t\t\t\t\t\"type\": \"xls\",\r\n\t\t\t\t\t\"fields\": {\r\n\t\t\t\t\t\t\"ProjectId\": \"project_id\",\r\n\t\t\t\t\t\t\"项目名称\": \"name\",\r\n\t\t\t\t\t\t\"项目描述\": \"description\",\r\n\t\t\t\t\t\t\"创建时间\": \"create_date\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tproject: {\r\n\t\t\t\t\tname: \"\",\r\n\t\t\t\t\towner: \"\",\r\n\t\t\t\t\tmembers: \"\",\r\n\t\t\t\t\tstate: 0,\r\n\t\t\t\t\tstages: \"\",\r\n\t\t\t\t\tcost: 0,\r\n\t\t\t\t\ttotal_cost: 0,\r\n\t\t\t\t},\r\n\t\t\t\tstages: [],\r\n\r\n\t\t\t\tstageItem: {\r\n\t\t\t\t\t_id: 0,\r\n\t\t\t\t\tstage_id: 0,\r\n\t\t\t\t\tproject_id: 0,\r\n\t\t\t\t\tname: \"\",\r\n\t\t\t\t\tstate: 0,\r\n\t\t\t\t\towner: \"\",\r\n\t\t\t\t\tmembers: \"\",\r\n\t\t\t\t\tstart_time: 0,\r\n\t\t\t\t\tend_time: 0,\r\n\t\t\t\t\tsort: 0,\r\n\t\t\t\t\tcreat_time: 0,\r\n\t\t\t\t},\r\n\t\t\t\tdialogTitle: \"添加阶段信息\",\r\n\t\t\t\tshowDialog: false,\r\n\r\n\t\t\t\texportExcelData: [],\r\n\t\t\t\taddAppidLoading: true,\r\n\t\t\t\tdescriptionThWidth: 380,\r\n\t\t\t\tbuttonThWidth: 200\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tthis._filter = {}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.$refs.udb.loadData()\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState('app', ['appName', 'appid'])\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 关闭操作\r\n\t\t\tcloseDialog(flag) {\r\n\t\t\t\tif (flag) {\r\n\t\t\t\t\t// 重新刷新表格内容\r\n\t\t\t\t\t// this.fetchData();\r\n\t\t\t\t\tconst that = this;\r\n\t\t\t\t\tthat.tableLoading = true;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthat.tableLoading = false;\r\n\t\t\t\t\t}, 1500);\r\n\t\t\t\t}\r\n\t\t\t\tthis.showDialog = false;\r\n\t\t\t},\r\n\t\t\teditRow(row) {\r\n\t\t\t\tconsole.log(\"#####################row##########################\")\r\n\r\n\t\t\t\tthis.stageItem = row;\r\n\t\t\t\tconsole.log(\"stageItem:\", this.stageItem)\r\n\t\t\t\tthis.dialogTitle = \"编辑阶段信息\";\r\n\t\t\t\tthis.showDialog = true;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.$refs[\"dialogComponent\"].showDialog = true;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tpageSizeChange(pageSize) {\r\n\t\t\t\tthis.options.pageSize = pageSize\r\n\t\t\t\tthis.options.pageCurrent = 1\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.loadData()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/* 选中项目导航中的一项后 */\r\n\t\t\tselectProject(item) {\r\n\t\t\t\tlet mem = JSON.stringify(item.members)\r\n\t\t\t\tvar st = []\r\n\r\n\t\t\t\tfor (let e of item.stages) {\r\n\t\t\t\t\t//console.log(JSON.stringify(e.name)) // e为一个阶段表的内容\r\n\t\t\t\t\t// st.push(e.name)  //ToDo\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(JSON.stringify(item.satges))\r\n\t\t\t\tconsole.log(JSON.stringify(item.stages))\r\n\t\t\t\tconsole.log(\"##################################################################\")\r\n\t\t\t\tthis.project = {\r\n\t\t\t\t\tname: item.name,\r\n\t\t\t\t\towner: item.owner_id,\r\n\t\t\t\t\tmembers: mem,\r\n\t\t\t\t\tstate: item.state,\r\n\t\t\t\t\tstages: JSON.stringify(item.satges),\r\n\t\t\t\t\tcost: item.cost,\r\n\t\t\t\t\ttotal_cost: item.total_cost\r\n\t\t\t\t}\r\n\t\t\t\tthis.stages = item.stages\r\n\t\t\t\t// console.log(item.name)\r\n\t\t\t\t// console.log(this.project.stages)\r\n\t\t\t},\r\n\t\t\tonqueryload(data) {\r\n\t\t\t\tif (!data.find(item => item.project_id === this.project_id)) {\r\n\t\t\t\t\tthis.addCurrentAppid({\r\n\t\t\t\t\t\tappid: this.project_id,\r\n\t\t\t\t\t\tname: this.appName,\r\n\t\t\t\t\t\tdescription: \"admin 管理后台\"\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.addAppidLoading = false\r\n\t\t\t\t}\r\n\t\t\t\tthis.exportExcelData = data\r\n\t\t\t},\r\n\t\t\tchangeSize(e) {\r\n\t\t\t\tthis.pageSizeIndex = e.detail.value\r\n\t\t\t},\r\n\t\t\taddCurrentAppid(app) {\r\n\t\t\t\t// 使用 clientDB 提交当前 appid\r\n\t\t\t\tdb.collection('opendb-app-list').add(app).then((res) => {\r\n\t\t\t\t\tthis.loadData()\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: `检测到数据库中无当前应用, 已自动添加应用: ${this.appName}`,\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 500)\r\n\t\t\t\t}).catch((err) => {\r\n\r\n\t\t\t\t}).finally(() => {\r\n\t\t\t\t\tthis.addAppidLoading = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetWhere() {\r\n\t\t\t\tconst query = this.query.trim()\r\n\t\t\t\tif (!query) {\r\n\t\t\t\t\treturn ''\r\n\t\t\t\t}\r\n\t\t\t\tconst queryRe = new RegExp(query, 'i')\r\n\t\t\t\treturn dbSearchFields.map(name => queryRe + '.test(' + name + ')').join(' || ')\r\n\t\t\t},\r\n\t\t\tsearch() {\r\n\t\t\t\tconst newWhere = this.getWhere()\r\n\t\t\t\tthis.where = newWhere\r\n\t\t\t\tthis.loadData()\r\n\t\t\t},\r\n\t\t\tloadData(clear = true) {\r\n\t\t\t\tthis.$refs.udb.loadData({\r\n\t\t\t\t\tclear\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonPageChanged(e) {\r\n\t\t\t\tthis.selectedIndexs.length = 0\r\n\t\t\t\tthis.$refs.table.clearSelection()\r\n\t\t\t\tthis.$refs.udb.loadData({\r\n\t\t\t\t\tcurrent: e.current\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tnavigateTo(url, clear) {\r\n\t\t\t\t// clear 表示刷新列表时是否清除页码，true 表示刷新并回到列表第 1 页，默认为 true\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl,\r\n\t\t\t\t\tevents: {\r\n\t\t\t\t\t\trefreshData: () => {\r\n\t\t\t\t\t\t\tthis.loadData(clear)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 多选处理\r\n\t\t\tselectedItems() {\r\n\t\t\t\tlet dataList = this.$refs.udb.dataList\r\n\t\t\t\treturn this.selectedIndexs.map(i => dataList[i]._id)\r\n\t\t\t},\r\n\t\t\t// 批量删除\r\n\t\t\tdelTable() {\r\n\t\t\t\tconsole.warn(\r\n\t\t\t\t\t\"删除应用，只能删除应用表 opendb-app-list 中的应用数据记录，不能删除与应用关联的其他数据，例如：使用升级中心 uni-upgrade-center 等插件产生的数据（应用版本数据等）\"\r\n\t\t\t\t)\r\n\t\t\t\tthis.$refs.udb.remove(this.selectedItems(), {\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.$refs.table.clearSelection()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 多选\r\n\t\t\tselectionChange(e) {\r\n\t\t\t\tthis.selectedIndexs = e.detail.index\r\n\t\t\t},\r\n\t\t\tconfirmDelete(id) {\r\n\t\t\t\tconsole.warn(\r\n\t\t\t\t\t\"删除应用，只能删除应用表 opendb-app-list 中的应用数据记录，不能删除与应用关联的其他数据，例如：使用升级中心 uni-upgrade-center 等插件产生的数据（应用版本数据等）\"\r\n\t\t\t\t)\r\n\t\t\t\tthis.$refs.udb.remove(id, {\r\n\t\t\t\t\tconfirmContent: '是否删除该应用',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.$refs.table.clearSelection()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsortChange(e, name) {\r\n\t\t\t\tthis.orderByFieldName = name;\r\n\t\t\t\tif (e.order) {\r\n\t\t\t\t\tthis.orderby = name + ' ' + orderByMapping[e.order]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.orderby = ''\r\n\t\t\t\t}\r\n\t\t\t\tthis.$refs.table.clearSelection()\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.$refs.udb.loadData()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfilterChange(e, name) {\r\n\t\t\t\tthis._filter[name] = {\r\n\t\t\t\t\ttype: e.filterType,\r\n\t\t\t\t\tvalue: e.filter\r\n\t\t\t\t}\r\n\t\t\t\tlet newWhere = filterToWhere(this._filter, db.command)\r\n\t\t\t\tif (Object.keys(newWhere).length) {\r\n\t\t\t\t\tthis.where = newWhere\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.where = ''\r\n\t\t\t\t}\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.$refs.udb.loadData()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpublish(id) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/system/app/uni-portal/uni-portal?id=' + id\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.button {\r\n\t\tdisplay: table-cell;\r\n\t\tpadding: 8px 10px;\r\n\t\tfont-size: 14px;\r\n\t\tborder-bottom: 1px $border-color solid;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #606266;\r\n\t\tline-height: 23px;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n</style>","import mod from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1720781127677\n      var cssReload = require(\"D:/App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}