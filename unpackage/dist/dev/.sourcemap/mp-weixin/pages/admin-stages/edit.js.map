{"version":3,"sources":["uni-app:///main.js","webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?03fe","webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?f928","webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?673d","webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?3733","uni-app:///pages/admin-stages/edit.vue","webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?397c","webpack:///F:/Work/UniApp/project-T/pages/admin-stages/edit.vue?3b46"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","result","name","props","dialogTitle","type","default","itemInfo","data","console","showDialog","formData","formOptions","rules","getValidator","onReady","methods","initFormData","i","submit","uni","mask","submitForm","icon","title","setTimeout","that","content","showCancel","closeDialog","getDetail","db","get"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AAC0K;AAC1K,gBAAgB,mLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sTAEN;AACP,KAAK;AACL;AACA,aAAa,8RAEN;AACP,KAAK;AACL;AACA,aAAa,oSAEN;AACP,KAAK;AACL;AACA,aAAa,wUAEN;AACP,KAAK;AACL;AACA,aAAa,iZAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAAunB,CAAgB,4oBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC0P3oB;AAEA;AAAA;AAEA;AACA;AAEA;EACA;EACA;IACA;MACAC;IACA;EACA;EACA;AACA;AAAA,gBAEA;EACAC;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;QACA;MACA;IACA;EACA;EACAE;IACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;IACA;MACAC;MACAC;MACAC;MACAC,yBACAC;IAEA;EACA;EAEAC;IACA;IACA;EACA;EAEAC;IACAC;MACA;MACAC;MACA;IACA;IACA;IACAC;MAAA;MACAC;QACAC;MACA;MACAZ;MACA;MACA;MACA;QACA;MACA;QACAW;QACA;MACA;IAEA;IACA;IACAE;MAAA;MACA;MACAb;MACAA;MACA;QACAW;UACAG;UACAC;QACA;QACA;QACAC;UAAA;QAAA;QACAC;MACA;QACAN;UACAO;UACAC;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;IAEA;AACA;AACA;AACA;IACAC;MAAA;MACAV;QACAC;MACA;MACAU,8CACA,+FACAC;QACA;QACA;UACA;QAEA;MACA;QACAZ;UACAO;UACAC;QACA;MACA;QACAR;MACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;ACpYA;AAAA;AAAA;AAAA;AAAm5B,CAAgB,64BAAG,EAAC,C;;;;;;;;;;;ACAv6B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/admin-stages/edit.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/admin-stages/edit.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./edit.vue?vue&type=template&id=fc875a06&\"\nvar renderjs\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./edit.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/admin-stages/edit.vue\"\nexport default component.exports","export * from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./edit.vue?vue&type=template&id=fc875a06&\"","var components\ntry {\n  components = {\n    uniForms: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms/uni-forms\" */ \"@/uni_modules/uni-forms/components/uni-forms/uni-forms.vue\"\n      )\n    },\n    uniFormsItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-forms/components/uni-forms-item/uni-forms-item\" */ \"@/uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.vue\"\n      )\n    },\n    uniEasyinput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput\" */ \"@/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n    uniDataCheckbox: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox\" */ \"@/uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox.vue\"\n      )\n    },\n    uniDatetimePicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker\" */ \"@/uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./edit.vue?vue&type=script&lang=js&\"","<!-- <template>\r\n  <view class=\"uni-container\">\r\n    <uni-forms ref=\"form\" :model=\"formData\" validate-trigger=\"submit\" err-show-type=\"toast\">\r\n      <uni-forms-item name=\"stage_id\" label=\"StageId\">\r\n        <uni-easyinput :disabled=\"true\" placeholder=\"阶段id\" v-model=\"formData.stage_id\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"project_id\" label=\"ProjectId\" required>\r\n        <uni-easyinput :disabled=\"true\" placeholder=\"对应的项目id\" v-model=\"formData.project_id\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"name\" label=\"\" required>\r\n        <uni-easyinput placeholder=\"阶段名称\" v-model=\"formData.name\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"state\" label=\"\">\r\n        <uni-easyinput placeholder=\"阶段状态, 1:未开始,2:进行中,3:已完成,4:延期中,5:已中止\" type=\"number\" v-model=\"formData.state\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"owner\" label=\"\">\r\n        <uni-easyinput placeholder=\"负责人\" v-model=\"formData.owner\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"members\" label=\"\">\r\n        <uni-easyinput placeholder=\"阶段成员\" v-model=\"formData.members\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"sort\" label=\"\">\r\n        <uni-easyinput placeholder=\"阶段排序\" type=\"number\" v-model=\"formData.sort\"></uni-easyinput>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"permision\" label=\"\">\r\n        <uni-data-checkbox :multiple=\"true\" v-model=\"formData.permision\"></uni-data-checkbox>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"start_time\" label=\"\">\r\n        <uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.start_time\"></uni-datetime-picker>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"end_time\" label=\"\">\r\n        <uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.end_time\"></uni-datetime-picker>\r\n      </uni-forms-item>\r\n      <uni-forms-item name=\"create_time\" label=\"\">\r\n        <uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.create_time\"></uni-datetime-picker>\r\n      </uni-forms-item>\r\n      <view class=\"uni-button-group\">\r\n        <button type=\"primary\" class=\"uni-button\" @click=\"submit\">提交</button>\r\n      </view>\r\n    </uni-forms>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import { validator } from '../../js_sdk/validator/admin-stages.js';\r\n\r\n  const db = uniCloud.database();\r\n  const dbCollectionName = 'admin-stages';\r\n\r\n  function getValidator(fields) {\r\n    let result = {}\r\n    for (let key in validator) {\r\n      if (fields.indexOf(key) > -1) {\r\n        result[key] = validator[key]\r\n      }\r\n    }\r\n    return result\r\n  }\r\n\r\n  \r\n\r\n  export default {\r\n    data() {\r\n      let formData = {\r\n        \"stage_id\": \"\",\r\n        \"project_id\": \"\",\r\n        \"name\": \"\",\r\n        \"state\": null,\r\n        \"owner\": \"\",\r\n        \"members\": \"\",\r\n        \"sort\": null,\r\n        \"permision\": [],\r\n        \"start_time\": null,\r\n        \"end_time\": null,\r\n        \"create_time\": null\r\n      }\r\n      return {\r\n        formData,\r\n        formOptions: {},\r\n        rules: {\r\n          ...getValidator(Object.keys(formData))\r\n        }\r\n      }\r\n    },\r\n    onLoad(e) {\r\n      if (e.id) {\r\n        const id = e.id\r\n        this.formDataId = id\r\n        this.getDetail(id)\r\n      }\r\n    },\r\n    onReady() {\r\n      this.$refs.form.setRules(this.rules)\r\n    },\r\n    methods: {\r\n      \r\n      /**\r\n       * 验证表单并提交\r\n       */\r\n      submit() {\r\n        uni.showLoading({\r\n          mask: true\r\n        })\r\n        this.$refs.form.validate().then((res) => {\r\n          return this.submitForm(res)\r\n        }).catch(() => {\r\n        }).finally(() => {\r\n          uni.hideLoading()\r\n        })\r\n      },\r\n\r\n      /**\r\n       * 提交表单\r\n       */\r\n      submitForm(value) {\r\n        // 使用 clientDB 提交数据\r\n        return db.collection(dbCollectionName).doc(this.formDataId).update(value).then((res) => {\r\n          uni.showToast({\r\n            icon: 'none',\r\n            title: '修改成功'\r\n          })\r\n          this.getOpenerEventChannel().emit('refreshData')\r\n          setTimeout(() => uni.navigateBack(), 500)\r\n        }).catch((err) => {\r\n          uni.showModal({\r\n            content: err.message || '请求服务失败',\r\n            showCancel: false\r\n          })\r\n        })\r\n      },\r\n\r\n      /**\r\n       * 获取表单数据\r\n       * @param {Object} id\r\n       */\r\n      getDetail(id) {\r\n        uni.showLoading({\r\n          mask: true\r\n        })\r\n        db.collection(dbCollectionName).doc(id).field(\"stage_id,project_id,name,state,owner,members,sort,permision,start_time,end_time,create_time\").get().then((res) => {\r\n          const data = res.result.data[0]\r\n          if (data) {\r\n            this.formData = data\r\n            \r\n          }\r\n        }).catch((err) => {\r\n          uni.showModal({\r\n            content: err.message || '请求服务失败',\r\n            showCancel: false\r\n          })\r\n        }).finally(() => {\r\n          uni.hideLoading()\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .uni-container {\r\n    padding: 15px;\r\n  }\r\n\r\n  .uni-input-border,\r\n  .uni-textarea-border {\r\n    width: 100%;\r\n    font-size: 14px;\r\n    color: #666;\r\n    border: 1px #e5e5e5 solid;\r\n    border-radius: 5px;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .uni-input-border {\r\n    padding: 0 10px;\r\n    height: 35px;\r\n\r\n  }\r\n\r\n  .uni-textarea-border {\r\n    padding: 10px;\r\n    height: 80px;\r\n  }\r\n\r\n  .uni-button-group {\r\n    margin-top: 50px;\r\n    /* #ifndef APP-NVUE */\r\n    display: flex;\r\n    /* #endif */\r\n    justify-content: center;\r\n  }\r\n\r\n  .uni-button {\r\n    width: 184px;\r\n  }\r\n</style -->>\r\n\r\n\r\n\r\n<template>\r\n\t<transition name=\"dialog-fade\">\r\n\t\t<el-dialog v-if=\"showDialog\" :title=\"dialogTitle\" class=\"dialog-component\" :visible.sync=\"showDialog\"\r\n\t\t\twidth=\"500px\" @close=\"closeDialog(0)\">\r\n\r\n\t\t\t<uni-forms ref=\"form\" :model=\"formData\" validate-trigger=\"submit\" err-show-type=\"toast\">\r\n\t\t\t\t<uni-forms-item name=\"stage_id\" label=\"阶段id\">\r\n\t\t\t\t\t<uni-easyinput :disabled=\"false\" placeholder=\"阶段id\" v-model=\"formData.stage_id\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"project_id\" label=\"对应的项目id\" required>\r\n\t\t\t\t\t<uni-easyinput :disabled=\"false\" placeholder=\"对应的项目id\"\r\n\t\t\t\t\t\tv-model=\"formData.project_id\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"阶段名称\" label=\"阶段名称\" required>\r\n\t\t\t\t\t<uni-easyinput placeholder=\"阶段名称\" v-model=\"formData.name\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"state\" label=\"阶段状态\">\r\n\t\t\t\t\t<uni-easyinput placeholder=\"阶段状态, 1:未开始,2:进行中,3:已完成,4:延期中,5:已中止\" type=\"number\"\r\n\t\t\t\t\t\tv-model=\"formData.state\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"owner\" label=\"负责人\">\r\n\t\t\t\t\t<uni-easyinput placeholder=\"负责人\" v-model=\"formData.owner\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"members\" label=\"阶段成员\">\r\n\t\t\t\t\t<uni-easyinput placeholder=\"阶段成员\" v-model=\"formData.members\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"sort\" label=\"阶段排序\">\r\n\t\t\t\t\t<uni-easyinput placeholder=\"阶段排序\" type=\"number\" v-model=\"formData.sort\"></uni-easyinput>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"permision\" label=\"权限\">\r\n\t\t\t\t\t<uni-data-checkbox :multiple=\"true\" v-model=\"formData.permision\"></uni-data-checkbox>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"start_time\" label=\"开始时间\">\r\n\t\t\t\t\t<uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.start_time\"></uni-datetime-picker>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"end_time\" label=\"结束时间\">\r\n\t\t\t\t\t<uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.end_time\"></uni-datetime-picker>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<uni-forms-item name=\"create_time\" label=\"创建时间\">\r\n\t\t\t\t\t<uni-datetime-picker return-type=\"timestamp\" v-model=\"formData.create_time\"></uni-datetime-picker>\r\n\t\t\t\t</uni-forms-item>\r\n\t\t\t\t<view class=\"uni-button-group\">\r\n\t\t\t\t\t<button class=\"uni-button\" type=\"primary\" size=\"mini\" @click=\"submit\">确定</button>\r\n\t\t\t\t\t<button class=\"uni-button\" type=\"warn\" size=\"mini\" @click=\"closeDialog(0)\">取消</button>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-forms>\r\n\t\t</el-dialog>\r\n\t</transition>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tvalidator\r\n\t} from '../../js_sdk/validator/admin-stages.js';\r\n\r\n\tconst db = uniCloud.database();\r\n\tconst dbCollectionName = 'admin-stages';\r\n\r\n\tfunction getValidator(fields) {\r\n\t\tlet result = {}\r\n\t\tfor (let key in validator) {\r\n\t\t\tif (fields.indexOf(key) > -1) {\r\n\t\t\t\tresult[key] = validator[key]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n\r\n\texport default {\r\n\t\tname: \"DialogComponent\",\r\n\t\tprops: {\r\n\t\t\tdialogTitle: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: \"添加人员\",\r\n\t\t\t},\r\n\t\t\titemInfo: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: function() {\r\n\t\t\t\t\treturn {};\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\tlet formData = {\r\n\t\t\t\t\"_id\": \"\",\r\n\t\t\t\t\"stage_id\": \"\",\r\n\t\t\t\t\"project_id\": \"\",\r\n\t\t\t\t\"name\": \"\",\r\n\t\t\t\t\"state\": null,\r\n\t\t\t\t\"owner\": \"\",\r\n\t\t\t\t\"members\": \"\",\r\n\t\t\t\t\"sort\": null,\r\n\t\t\t\t\"permision\": [],\r\n\t\t\t\t\"start_time\": null,\r\n\t\t\t\t\"end_time\": null,\r\n\t\t\t\t\"create_time\": null\r\n\t\t\t}\r\n\t\t\tconsole.log(\"edit form************\")\r\n\t\t\treturn {\r\n\t\t\t\tshowDialog: false,\r\n\t\t\t\tformData: JSON.parse(JSON.stringify(this.itemInfo)),\r\n\t\t\t\tformOptions: {},\r\n\t\t\t\trules: {\r\n\t\t\t\t\t...getValidator(Object.keys(formData))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonReady() {\r\n\t\t\t/* ToDo 表单验证 */\r\n\t\t\tthis.$refs.form.setRules(this.rules)\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tinitFormData(item) {\r\n\t\t\t\tlet i = item\r\n\t\t\t\ti.members = JSON.stringify(i.members)\r\n\t\t\t\treturn i\r\n\t\t\t},\r\n\t\t\t//验证表单并提交\t\t\t \r\n\t\t\tsubmit() {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(\"dialogCompent--res:\")\r\n\t\t\t\t// console.log(JSON.stringify(res))\r\n\t\t\t\t/* 出错，验证通过不了 ToDo */\r\n\t\t\t\tthis.$refs.form.validate().then((res) => {\r\n\t\t\t\t\treturn this.submitForm(res)\r\n\t\t\t\t}).catch(() => {}).finally(() => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tlet formData = {}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t//提交表单\r\n\t\t\tsubmitForm(value) {\r\n\t\t\t\t// 使用 clientDB 提交数据\r\n\t\t\t\tconsole.log(\"提交表单submitForm...........................\")\r\n\t\t\t\tconsole.log(this.formDataId)\r\n\t\t\t\treturn db.collection(dbCollectionName).doc(this.formDataId).update(value).then((res) => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '修改成功'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.getOpenerEventChannel().emit('refreshData')\r\n\t\t\t\t\tsetTimeout(() => uni.navigateBack(), 500)\r\n\t\t\t\t\tthat.closeDialog(1);\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: err.message || '请求服务失败',\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 关闭弹框\r\n\t\t\tcloseDialog(flag) {\r\n\t\t\t\t// this.$refs[\"formInfo\"].resetFields();\r\n\t\t\t\tthis.showDialog = false;\r\n\t\t\t\tthis.$emit(\"closeDialog\", flag);\r\n\t\t\t\tthis.formData = {}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 获取表单数据\r\n\t\t\t * @param {Object} id\r\n\t\t\t */\r\n\t\t\tgetDetail(id) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tdb.collection(dbCollectionName).doc(id).field(\r\n\t\t\t\t\t\t\"stage_id,project_id,name,state,owner,members,sort,permision,start_time,end_time,create_time\")\r\n\t\t\t\t\t.get().then((res) => {\r\n\t\t\t\t\t\tconst data = res.result.data[0]\r\n\t\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\t\tthis.formData = data\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: err.message || '请求服务失败',\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).finally(() => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.uni-container {\r\n\t\tpadding: 15px;\r\n\t}\r\n\r\n\t.uni-input-border,\r\n\t.uni-textarea-border {\r\n\t\twidth: 100%;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #666;\r\n\t\tborder: 1px #e5e5e5 solid;\r\n\t\tborder-radius: 5px;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.uni-input-border {\r\n\t\tpadding: 0 10px;\r\n\t\theight: 35px;\r\n\r\n\t}\r\n\r\n\t.uni-textarea-border {\r\n\t\tpadding: 10px;\r\n\t\theight: 80px;\r\n\t}\r\n\r\n\t.uni-button-group {\r\n\t\tmargin-top: 50px;\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\t/* #endif */\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.uni-button {\r\n\t\twidth: 184px;\r\n\t}\r\n</style>","import mod from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./edit.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\App\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./edit.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1720781127879\n      var cssReload = require(\"D:/App/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}